<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liste des Docteurs</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        .doctor-card img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; }
        .doctor-details { font-size: 14px; color: #666; }
    </style>
</head>
<body class="container py-4">

    <h2 class="mb-4 text-center">Liste des Docteurs</h2>
    <button class="btn btn-primary mb-3" id="openFilter">üîç Filtrer</button>

    <div class="row doctor-list"></div>

    <!-- Modale de filtrage -->
    <div class="modal fade" id="filterModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Filtrer les Docteurs</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <label for="regionFilter">R√©gion :</label>
                    <select id="regionFilter" class="form-select mb-2">
                        <option value="">Toutes</option>
                    </select>

                    <label for="villeFilter">Ville :</label>
                    <select id="villeFilter" class="form-select mb-2">
                        <option value="">Toutes</option>
                    </select>

                    <label for="secteurFilter">Secteur :</label>
                    <select id="secteurFilter" class="form-select mb-2">
                        <option value="">Tous</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button id="applyFilter" class="btn btn-success">Appliquer</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const Doctor = {
            data: [],

            init: function(doctors) {
                this.data = doctors;
                this.populateFilters();
                this.displayDoctors();
                this.bindEvents();
            },

            displayDoctors: function(filters = {}) {
                const list = $(".doctor-list");
                list.empty();

                const filteredDoctors = this.data.filter(doc => {
                    return (!filters.region || doc.region === filters.region) &&
                           (!filters.ville || doc.ville === filters.ville) &&
                           (!filters.secteur || doc.secteur === filters.secteur);
                });

                filteredDoctors.forEach(doc => {
                    list.append(`
                        <div class="col-md-4 mb-3">
                            <div class="card doctor-card p-3 shadow-sm">
                                <div class="d-flex align-items-center">
                                    <img src="${doc.image}" alt="${doc.name}" class="me-3">
                                    <div>
                                        <h5 class="doctor-name mb-1">${doc.name}</h5>
                                        <p class="doctor-details mb-1">${doc.specialite} - ${doc.centre}</p>
                                        <p class="doctor-details mb-1">Exp√©rience: ${doc.experience} | Dispo: ${doc.dispo}</p>
                                        <p class="doctor-details">Frais: ${doc.frais} MGA</p>
                                        <p class="doctor-details">üìç ${doc.region}, ${doc.ville}, ${doc.secteur}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `);
                });
            },

            populateFilters: function() {
                const regions = new Set();
                const villes = new Set();
                const secteurs = new Set();

                this.data.forEach(doc => {
                    regions.add(doc.region);
                    villes.add(doc.ville);
                    secteurs.add(doc.secteur);
                });

                this.fillSelect("#regionFilter", regions);
                this.fillSelect("#villeFilter", villes);
                this.fillSelect("#secteurFilter", secteurs);
            },

            fillSelect: function(selector, values) {
                const select = $(selector);
                select.append([...values].map(value => `<option value="${value}">${value}</option>`));
            },

            bindEvents: function() {
                $("#openFilter").click(() => this.showFilterModal());
                $("#applyFilter").click(() => this.applyFilters());
            },

            showFilterModal: function() {
                const modal = new bootstrap.Modal(document.getElementById('filterModal'));
                modal.show();
            },

            applyFilters: function() {
                const filters = {
                    region: $("#regionFilter").val(),
                    ville: $("#villeFilter").val(),
                    secteur: $("#secteurFilter").val()
                };
                this.displayDoctors(filters);
            }
        };

        $(document).ready(function() {
            const doctorsData = [
                {name: "Amanda Clara", specialite: "Sp√©cialiste", centre: "Clinique A", experience: "12 ans", dispo: "Lundi, Mardi", frais: "100 000", image: "amanda.png", region: "Analamanga", secteur: "Sant√©", ville: "Antananarivo" },
                {name: "John Doe", specialite: "G√©n√©raliste", centre: "H√¥pital B", experience: "8 ans", dispo: "Mercredi, Jeudi", frais: "80 000", image: "john.png", region: "Vakinankaratra", secteur: "H√¥pital", ville: "Antsirabe" },
                {name: "Sarah Rakoto", specialite: "Dentiste", centre: "Cabinet C", experience: "5 ans", dispo: "Vendredi, Samedi", frais: "50 000", image: "sarah.png", region: "Atsinanana", secteur: "Dentaire", ville: "Toamasina" },
                {name: "Lucien Ravelo", specialite: "Cardiologue", centre: "Clinique D", experience: "15 ans", dispo: "Lundi, Mercredi", frais: "150 000", image: "lucien.png", region: "Diana", secteur: "Cardiologie", ville: "Antsiranana" },
                {name: "Mamy Rabe", specialite: "P√©diatre", centre: "H√¥pital E", experience: "10 ans", dispo: "Jeudi, Vendredi", frais: "90 000", image: "mamy.png", region: "Sofia", secteur: "P√©diatrie", ville: "Mahajanga" },
                {name: "Zo Razaf", specialite: "Dermatologue", centre: "Cabinet F", experience: "7 ans", dispo: "Samedi, Dimanche", frais: "70 000", image: "zo.png", region: "Itasy", secteur: "Dermatologie", ville: "Miarinarivo" },
                {name: "Sophie Rajaon", specialite: "Gyn√©cologue", centre: "Clinique G", experience: "20 ans", dispo: "Lundi, Mardi, Jeudi", frais: "200 000", image: "sophie.png", region: "Bongolava", secteur: "Gyn√©cologie", ville: "Tsiroanomandidy" },
                {name: "Patricia Andriaman", specialite: "Ophtalmologue", centre: "Centre H", experience: "5 ans", dispo: "Mercredi, Samedi", frais: "50 000", image: "patricia.png", region: "Haute Matsiatra", secteur: "Ophtalmologie", ville: "Fianarantsoa" },
                {name: "Rita Rahar", specialite: "Chirurgien", centre: "Clinique I", experience: "18 ans", dispo: "Lundi, Vendredi", frais: "120 000", image: "rita.png", region: "Melaky", secteur: "Chirurgie", ville: "Morrobe" },
                {name: "Lova Randri", specialite: "Neurologue", centre: "H√¥pital J", experience: "22 ans", dispo: "Mardi, Jeudi, Samedi", frais: "140 000", image: "lova.png", region: "Atsimo-Andrefana", secteur: "Neurologie", ville: "Toliara" }
            ];

            Doctor.init(doctorsData);
        });
    </script>

</body>
</html>
